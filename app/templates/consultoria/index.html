{% extends "base.html" %}

{% block title %}Consultoria{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">
            <i class="fas fa-briefcase me-2"></i>Dashboard - Consultoria
        </h1>
        <div class="btn-group">
            <a class="btn btn-success" onclick="novoProjeto()">
                <i class="fas fa-plus me-1"></i>Novo Projeto
            </a>
            <button class="btn btn-outline-primary" onclick="atualizarDados()">
                <i class="fas fa-sync me-1"></i>Atualizar
            </button>
        </div>
    </div>

    <!-- Acesso R√°pido -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-primary border-left-primary">
                <h5><i class="fas fa-handshake me-2"></i>üíº Gest√£o de Consultoria Ativa</h5>
                <p class="mb-0">Gerencie projetos, clientes e consultores:</p>
                <div class="mt-2">
                    <a href="{{ url_for('consultoria.projetos') }}" class="btn btn-outline-success btn-sm me-2">
                        üìÅ Projetos
                    </a>
                    <a href="{{ url_for('consultoria.clientes') }}" class="btn btn-outline-primary btn-sm me-2">
                        üë• Clientes
                    </a>
                    <a href="{{ url_for('consultoria.consultores') }}" class="btn btn-outline-info btn-sm me-2">
                        üë®‚Äçüíº Consultores
                    </a>
                    <a href="{{ url_for('consultoria.contratos') }}" class="btn btn-outline-warning btn-sm me-2">
                        üìã Contratos
                    </a>
                    <a href="{{ url_for('consultoria.cronogramas') }}" class="btn btn-outline-secondary btn-sm">
                        üìÖ Cronogramas
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- KPIs de Consultoria -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2 cursor-pointer" onclick="window.location.href='{{ url_for('consultoria.projetos') }}'">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Projetos Ativos
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">15</div>
                            <div class="small text-success">
                                <i class="fas fa-arrow-up me-1"></i>+3 este m√™s
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-project-diagram fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2 cursor-pointer" onclick="window.location.href='{{ url_for('consultoria.clientes') }}'">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Clientes Ativos
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">32</div>
                            <div class="small text-primary">
                                <i class="fas fa-users me-1"></i>8 novos clientes
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2 cursor-pointer" onclick="window.location.href='{{ url_for('consultoria.consultores') }}'">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Consultores
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">12</div>
                            <div class="small text-warning">
                                <i class="fas fa-user-tie me-1"></i>8 especialistas
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user-tie fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2 cursor-pointer" onclick="window.location.href='{{ url_for('consultoria.contratos') }}'">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Receita Mensal
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">R$ 247k</div>
                            <div class="small text-info">
                                <i class="fas fa-dollar-sign me-1"></i>+12% vs anterior
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalNovoProjeto" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-plus me-2"></i>Novo Projeto
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="formNovoProjeto">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Nome do Projeto*</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Cliente*</label>
                            <select class="form-select" required>
                                <option value="">Selecione...</option>
                                <option>Empresa A</option>
                                <option>Empresa B</option>
                                <option>Empresa C</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <label class="form-label">Consultor Respons√°vel*</label>
                            <select class="form-select" required>
                                <option value="">Selecione...</option>
                                <option>Jo√£o Silva</option>
                                <option>Maria Santos</option>
                                <option>Pedro Costa</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Valor do Projeto</label>
                            <input type="text" class="form-control" placeholder="R$ 0,00">
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <label class="form-label">Data de In√≠cio</label>
                            <input type="date" class="form-control">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Previs√£o de Conclus√£o</label>
                            <input type="date" class="form-control">
                        </div>
                    </div>
                    <div class="mt-3">
                        <label class="form-label">Descri√ß√£o</label>
                        <textarea class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" onclick="salvarProjeto()">
                    <i class="fas fa-save me-1"></i>Salvar
                </button>
            </div>
        </div>
    </div>
</div>

    <!-- M√≥dulos Principais -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-briefcase me-2"></i>Gest√£o de Consultoria
            </h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-project-diagram fa-3x text-success"></i>
                            </div>
                            <h5 class="card-title">Projetos</h5>
                            <p class="card-text text-muted">Gerencie todos os projetos de consultoria, status e entregas</p>
                            <a href="{{ url_for('consultoria.projetos') }}" class="btn btn-success w-100">
                                <i class="fas fa-project-diagram me-1"></i>Ver Projetos
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-users fa-3x text-primary"></i>
                            </div>
                            <h5 class="card-title">Clientes</h5>
                            <p class="card-text text-muted">Cadastro e gest√£o de clientes, hist√≥rico e relacionamento</p>
                            <a href="{{ url_for('consultoria.clientes') }}" class="btn btn-primary w-100">
                                <i class="fas fa-users me-1"></i>Gerenciar Clientes
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-user-tie fa-3x text-warning"></i>
                            </div>
                            <h5 class="card-title">Consultores</h5>
                            <p class="card-text text-muted">Equipe de consultores, especialidades e aloca√ß√£o</p>
                            <a href="{{ url_for('consultoria.consultores') }}" class="btn btn-warning w-100">
                                <i class="fas fa-user-tie me-1"></i>Ver Consultores
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-file-contract fa-3x text-info"></i>
                            </div>
                            <h5 class="card-title">Contratos</h5>
                            <p class="card-text text-muted">Gest√£o de contratos, valores e condi√ß√µes comerciais</p>
                            <a href="{{ url_for('consultoria.contratos') }}" class="btn btn-info w-100">
                                <i class="fas fa-file-contract me-1"></i>Ver Contratos
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-calendar-alt fa-3x text-secondary"></i>
                            </div>
                            <h5 class="card-title">Cronogramas</h5>
                            <p class="card-text text-muted">Planejamento e acompanhamento de cronogramas</p>
                            <a href="{{ url_for('consultoria.cronogramas') }}" class="btn btn-secondary w-100">
                                <i class="fas fa-calendar-alt me-1"></i>Ver Cronogramas
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm hover-shadow">
                        <div class="card-body text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-chart-line fa-3x text-dark"></i>
                            </div>
                            <h5 class="card-title">Relat√≥rios</h5>
                            <p class="card-text text-muted">Relat√≥rios financeiros e de performance dos projetos</p>
                            <button class="btn btn-dark w-100" onclick="relatorios()">
                                <i class="fas fa-chart-line me-1"></i>Gerar Relat√≥rios
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function atualizarDados() {
    alert('Dados atualizados!');
    location.reload();
}

function relatorios() {
    alert('Relat√≥rios de Consultoria');
}

// Efeitos visuais
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.hover-shadow');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.transition = 'transform 0.2s ease-in-out';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
    const clickableCards = document.querySelectorAll('.cursor-pointer');
    clickableCards.forEach(card => {
        card.style.cursor = 'pointer';
    });
});

console.log('Dashboard Consultoria carregado!');
</script>
<script>
function novoProjeto() {
    new bootstrap.Modal(document.getElementById('modalNovoProjeto')).show();
}

function editarProjeto(id) {
    alert(`Editando projeto ${id}`);
}

function verDetalhes(id) {
    alert(`Detalhes do projeto ${id}`);
}

function cronograma(id) {
    window.location.href = '/consultoria/cronogramas?projeto=' + id;
}

function relatorio(id) {
    alert(`Relat√≥rio do projeto ${id}`);
}

function salvarProjeto() {
    alert('Projeto salvo com sucesso!');
    bootstrap.Modal.getInstance(document.getElementById('modalNovoProjeto')).hide();
}

function filtrarProjetos() {
    // L√≥gica de filtro aqui
    console.log('Filtrando projetos...');
}

function limparFiltros() {
    document.getElementById('filtroStatus').value = '';
    document.getElementById('filtroCliente').value = '';
    document.getElementById('filtroConsultor').value = '';
    filtrarProjetos();
}

function exportarProjetos() {
    alert('Exportando projetos para Excel...');
}

console.log('P√°gina de Projetos carregada!');
</script>

<style>
.hover-shadow {
    transition: all 0.2s ease-in-out;
}

.hover-shadow:hover {
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
    transform: translateY(-2px);
}

.cursor-pointer {
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.cursor-pointer:hover {
    transform: translateY(-2px);
}
</style>
{% endblock %}