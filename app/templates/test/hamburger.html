{% extends "base.html" %}

{% block title %}Teste Menu Hamburguer{% endblock %}

{% block head %}
<style>
    .test-info {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    
    .device-indicator {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #4e73df;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-size: 0.8rem;
        z-index: 1001;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    .test-card {
        border-left: 4px solid #4e73df;
        margin-bottom: 1rem;
    }
    
    @media (max-width: 768px) {
        .test-info {
            padding: 1.5rem;
            text-align: center;
        }
        
        .test-info h2 {
            font-size: 1.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Info do Teste -->
    <div class="test-info">
        <h2><i class="fas fa-hamburger me-2"></i>Teste do Menu Hamburguer</h2>
        <p class="mb-2">Esta p√°gina testa a funcionalidade do menu hamburguer em diferentes tamanhos de tela.</p>
        <p class="mb-0">
            <strong>Mobile/Tablet:</strong> Bot√£o hamburguer deve aparecer no topo 
            <strong>Desktop:</strong> Menu lateral fixo
        </p>
    </div>

    <!-- Instru√ß√µes -->
    <div class="row">
        <div class="col-lg-4 mb-4">
            <div class="card test-card">
                <div class="card-body">
                    <h5><i class="fas fa-mobile-alt text-primary me-2"></i>Mobile (‚â§768px)</h5>
                    <ul class="list-unstyled">
                        <li>‚úÖ Bot√£o hamburguer vis√≠vel</li>
                        <li>‚úÖ Menu desliza da esquerda</li>
                        <li>‚úÖ Overlay escuro aparece</li>
                        <li>‚úÖ Clique fora fecha menu</li>
                        <li>‚úÖ ESC fecha menu</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-4">
            <div class="card test-card">
                <div class="card-body">
                    <h5><i class="fas fa-tablet-alt text-warning me-2"></i>Tablet (768-1024px)</h5>
                    <ul class="list-unstyled">
                        <li>‚úÖ Bot√£o hamburguer vis√≠vel</li>
                        <li>‚úÖ Menu se adapta</li>
                        <li>‚úÖ Transi√ß√µes suaves</li>
                        <li>‚úÖ Touch-friendly</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-4">
            <div class="card test-card">
                <div class="card-body">
                    <h5><i class="fas fa-desktop text-success me-2"></i>Desktop (>1024px)</h5>
                    <ul class="list-unstyled">
                        <li>‚úÖ Menu lateral fixo</li>
                        <li>‚úÖ Bot√£o hamburguer oculto</li>
                        <li>‚úÖ Layout completo</li>
                        <li>‚úÖ Navega√ß√£o normal</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- √Årea de Teste -->
    <div class="card shadow">
        <div class="card-header">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-vial me-2"></i>√Årea de Teste Interativo
            </h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <h6>Informa√ß√µes da Tela:</h6>
                    <ul>
                        <li><strong>Largura:</strong> <span id="screenWidth">-</span>px</li>
                        <li><strong>Altura:</strong> <span id="screenHeight">-</span>px</li>
                        <li><strong>Tipo:</strong> <span id="deviceType">-</span></li>
                        <li><strong>Menu:</strong> <span id="menuStatus">-</span></li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>A√ß√µes de Teste:</h6>
                    <div class="btn-group-vertical w-100">
                        <button class="btn btn-outline-primary mb-2" onclick="forceToggleMenu()">
                            <i class="fas fa-bars me-1"></i>Alternar Menu (For√ßa)
                        </button>
                        <button class="btn btn-outline-secondary mb-2" onclick="checkMenuState()">
                            <i class="fas fa-info me-1"></i>Verificar Estado
                        </button>
                        <button class="btn btn-outline-success" onclick="testResponsive()">
                            <i class="fas fa-mobile me-1"></i>Simular Resize
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Status do Menu -->
            <div class="alert alert-info mt-3" id="statusAlert">
                <strong>Status:</strong> Aguardando teste...
            </div>
        </div>
    </div>

    <!-- Indicador de Dispositivo -->
    <div class="device-indicator" id="deviceIndicator">
        Desktop
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function updateScreenInfo() {
    const width = window.innerWidth;
    const height = window.innerHeight;
    
    document.getElementById('screenWidth').textContent = width;
    document.getElementById('screenHeight').textContent = height;
    
    let deviceType = 'Desktop';
    let indicator = 'Desktop üíª';
    let menuStatus = 'Lateral Fixo';
    
    if (width <= 768) {
        deviceType = 'Mobile';
        indicator = 'Mobile üì±';
        menuStatus = 'Hamburguer';
    } else if (width <= 1024) {
        deviceType = 'Tablet';
        indicator = 'Tablet üìü';
        menuStatus = 'Hamburguer';
    }
    
    document.getElementById('deviceType').textContent = deviceType;
    document.getElementById('deviceIndicator').textContent = indicator;
    document.getElementById('menuStatus').textContent = menuStatus;
}

function forceToggleMenu() {
    const mobileToggle = document.getElementById('mobileToggle');
    if (mobileToggle) {
        mobileToggle.click();
        updateStatus('Menu alternado via JavaScript');
    } else {
        updateStatus('Bot√£o hamburguer n√£o encontrado');
    }
}

function checkMenuState() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebarOverlay');
    const toggle = document.getElementById('mobileToggle');
    
    let status = 'Estado do Menu:\n';
    status += `- Sidebar classe: ${sidebar ? sidebar.className : 'n√£o encontrado'}\n`;
    status += `- Overlay ativo: ${overlay ? overlay.classList.contains('active') : 'n√£o encontrado'}\n`;
    status += `- Toggle vis√≠vel: ${toggle ? (getComputedStyle(toggle).display !== 'none') : 'n√£o encontrado'}`;
    
    updateStatus(status);
    alert(status);
}

function testResponsive() {
    updateStatus('Redimensione a janela para testar responsividade');
    
    // Simular diferentes tamanhos
    const sizes = [
        { width: 320, name: 'Mobile Pequeno' },
        { width: 768, name: 'Mobile/Tablet' },
        { width: 1024, name: 'Tablet/Desktop' },
        { width: 1200, name: 'Desktop' }
    ];
    
    let currentSize = 0;
    const interval = setInterval(() => {
        if (currentSize < sizes.length) {
            const size = sizes[currentSize];
            updateStatus(`Simulando: ${size.name} (${size.width}px)`);
            currentSize++;
        } else {
            clearInterval(interval);
            updateStatus('Teste de simula√ß√£o conclu√≠do!');
        }
    }, 1500);
}

function updateStatus(message) {
    const statusAlert = document.getElementById('statusAlert');
    statusAlert.innerHTML = `<strong>Status:</strong> ${message}`;
    
    // Adicionar timestamp
    const now = new Date().toLocaleTimeString();
    statusAlert.innerHTML += `<br><small class="text-muted">Atualizado √†s ${now}</small>`;
}

// Monitorar mudan√ßas de tamanho
let resizeTimer;
window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
        updateScreenInfo();
        updateStatus('Tela redimensionada - informa√ß√µes atualizadas');
    }, 250);
});

// Monitorar cliques no menu
document.addEventListener('click', function(e) {
    if (e.target.closest('#mobileToggle')) {
        updateStatus('Bot√£o hamburguer clicado');
    } else if (e.target.closest('#sidebarOverlay')) {
        updateStatus('Overlay clicado - menu fechando');
    } else if (e.target.closest('.nav-link')) {
        updateStatus('Link do menu clicado');
    }
});

// Inicializar
updateScreenInfo();
updateStatus('P√°gina de teste carregada - pronto para testes!');

console.log('Teste do menu hamburguer inicializado!');
</script>
{% endblock %}
